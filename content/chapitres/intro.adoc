
include::../attributes.adoc[]

[{invert}]

= Docker

image::empty_harbor.png[background, size=cover, position=left, opacity=0.1]

"La Base"

== Pourquoi ?

image::docker-logo-monochromatic.png[width=200]

ü§î Quel est le probl√®me ?

[%auto-animate]
== Pourquoi commencer par un probl√®me ?

image::docker-logo-monochromatic.png[width=200]

ü§î Commen√ßons plut√¥t par une d√©finition:

> Docker c'est ...

[.notes]
--
* Demander √† l'assistance une d√©finition
--

[%auto-animate]
== Pourquoi commencer par un probl√®me ?

image::docker-logo-monochromatic.png[width=200]

ü§î D√©finition quelque peu dat√©e (2014):

> Docker is ...

[.notes]
--
* Demander √† l'assistance une d√©finition
* make a point
--

[%auto-animate]
== Pourquoi commencer par un probl√®me ?

image::docker-logo-monochromatic.png[width=200]

ü§î D√©finition quelque peu dat√©e (2014):

> Docker is a toolset for Linux containers designed to ‚Äòbuild, ship and run‚Äô distributed applications.

[.small]
https://www.infoq.com/articles/docker-future/

[.notes]
--
* https://www.infoq.com/articles/docker-future/
--

[%auto-animate]
== Linux containers ?

image::docker-logo-monochromatic.png[width=200]

ü§î Nous voil√† bien...

> C'est quoi un container?

[.notes]
--
* https://www.infoq.com/articles/docker-future/
--

[%auto-animate]
== Linux containers ?

image::docker-logo-monochromatic.png[width=200]

ü§î Nous voil√† bien...

> C'est quoi un container?

[.small]
Vous voulez la version enfant de 5 ans? Je ne crois pas...

[.notes]
--
* J'ai la version "les containers expliqu√©s √† un enfant de 5 ans", mais pas s√ªr que vous appr√©ciez...
* On va donc passer √† la suite, et on y revient dans un moment.
* Imagine que tu as une bo√Æte magique appel√©e "conteneur".
* Cette bo√Æte peut contenir toutes sortes de choses, comme des jouets, des bonbons ou m√™me des dessins.
* Maintenant, dans le monde de l'informatique, un conteneur Docker est un peu comme cette bo√Æte magique.
* Mais au lieu de jouets ou de bonbons, un conteneur Docker peut contenir des programmes et toutes les choses dont ces programmes ont besoin pour fonctionner.
* Par exemple, il peut contenir un site Web, une application ou m√™me une partie d'un jeu vid√©o.
* Ce qui est vraiment cool avec les conteneurs Docker, c'est qu'ils sont tr√®s sp√©ciaux.
* Chaque conteneur est comme une petite bo√Æte magique qui garde tout bien organis√© √† l'int√©rieur.
* Et tu peux facilement prendre cette bo√Æte magique et la mettre sur n'importe quel ordinateur, qu'il soit grand ou petit, comme si tu transportais tes jouets pr√©f√©r√©s chez un ami.
* Cela signifie que les conteneurs Docker aident les d√©veloppeurs √† s'assurer que leurs programmes fonctionnent de la m√™me mani√®re partout o√π ils les utilisent. C'est comme si tu pouvais t'amuser avec tes jouets pr√©f√©r√©s chez toi, chez un ami, ou m√™me √† l'√©cole, et tout fonctionnerait toujours comme pr√©vu.
* En r√©sum√©, un conteneur Docker est comme une bo√Æte magique pour les programmes informatiques.
* Il garde tout bien organis√© √† l'int√©rieur et peut √™tre d√©plac√© facilement d'un ordinateur √† un autre, comme si tu emportais tes jouets pr√©f√©r√©s partout o√π tu vas. C'est super pratique pour les personnes qui cr√©ent des choses sur l'ordinateur !
--

[{invert}]
[%auto-animate]
== Docker est vieux

10 ans d√©j√†...

image::containerconteneuraccidenteavariejpg_5e8b87ccc8c27.jpg[position=left, opacity=0.1]

[.notes]
--

* The story of Docker starts in Paris with a startup called DotCloud, founded by Solomon Hykes, Kamel Founadi,
and Sebastien Pahl in 2008 to provide cloud hosting services for software developers.
* It was first released as an open source project by DotCloud in March 2013.
* The project quickly became popular, leading to DotCloud rebranded as Docker Inc
--

[{invert}]
[%auto-animate]
== Docker est vieux

Mais moi aussi...

image::piWorkshop.png[position=left, opacity=0.1]

[.notes]
--
* parler de mes d√©buts en 2015/2016
** Reprendre la d√©claration du d√©but: j'ai toujours √©t√© brouillon, devops avant que le mot n'existe, trifouillant 1000 projets √† la fois, et donc la matrix from hell, c'√©tait mon quotidien
** Machine Linux non officielle, non autoris√©e, docker impossible sur nos machines de d√©v, oblig√© de passer par une VM
** Docker int√©ressant, mais interdit en prod, impossible en d√©v...
** L√† dessus arrive Damien, qui nous fait un workshop Docker sur Raspberry, et l√† je craque
** J'ai besoin d'un laboratoire √† distance de terminaux Android, et Docker sur Raspberry Pi pourrait √™tre la solution
--

[{invert}]
[%auto-animate]
== Docker on arm

Aucune raison que √ßa soit r√©serv√© aux puissants! La r√©volution vaincra!

image::resin-ports-docker-to-arm.png[position=left, opacity=0.1]

[.notes]
--
* Parler de balena
--

[{invert}]
[%auto-animate]
== Docker on *

Linux everywhere... And then Docker to follow.

image::buildx_multi_arch.png[position=left, opacity=0.1]

[.notes]
--
* Parler de riscv, de buildx qui permet de builder pour riscv alors que docker pour riscv n'est pas encore support√©
* Finir par sortir la Radxa Zero, la brancher, s'y connecter et faire le docker container run hello world
--

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

image::base_du_probl√®me_sans_dev.png[]

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

image::base_du_probl√®me_sans_dev_et_ops.png[]

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

image::base_du_probl√®me_sans_stabilit√©.png[]

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

image::base_du_probl√®me_sans_fronti√®rel.png[]

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

image::base_du_probl√®me_final.png[]

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

Histoire vraie.

[width="100%",cols="^m,e",frame=none,grid=none]
|=======
|Hey salut  ! |
|=======

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

Histoire vraie.

[width="100%",cols="^m,e",frame=none,grid=none]
|=======
|Hey salut  ! |
| | cc
|=======

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

Histoire vraie.

[width="100%",cols="^m,e",frame=none,grid=none]
|=======
|Hey salut  ! |
| | cc
|Tu peux mettre √† jour les packages syst√®me steup ? j'ai un truc √† tester. |
|=======

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

Histoire vraie.

[width="100%",cols="^m,e",frame=none,grid=none]
|=======
|Hey salut  ! |
| | cc
|Tu peux mettre √† jour les packages syst√®me steup ? j'ai un truc √† tester. |
| | nan
|=======

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

Histoire vraie.

[width="100%",cols="^m,e",frame=none,grid=none]
|=======
|Hey salut  ! |
| | cc
|Tu peux mettre √† jour les packages syst√®me steup ? j'ai un truc √† tester. |
| | nan
| ??? |
|=======

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

Histoire vraie.

[width="100%",cols="^m,e",frame=none,grid=none]
|=======
|Hey salut  ! |
| | cc
|Tu peux mettre √† jour les packages syst√®me steup ? j'ai un truc √† tester. |
| | nan
| ??? |
| | pas standard dsl
|=======

[%auto-animate]
== On n'avait pas parl√© d'un probl√®me?

Histoire vraie.

[width="100%",cols="^m,e",frame=none,grid=none]
|=======
|Hey salut  ! |
| | cc
|Tu peux mettre √† jour les packages syst√®me steup ? j'ai un truc √† tester. |
| | nan
| ??? |
| | pas standard dsl
|=======

image::1072129428-image16.png[]

== On n'avait pas parl√© d'un probl√®me?

image::matrixfromhell.jpg[]

Probl√®me de temps **exponentiel**

[.notes]
--
* Le "probl√®me de la matrice de l'enfer" (ou "matrix from hell" en anglais) est une expression qui fait r√©f√©rence √† la complexit√© croissante des configurations logicielles dans le monde de l'informatique.
* Avant l'arriv√©e de Docker, il √©tait souvent difficile de g√©rer toutes les d√©pendances et les param√®tres n√©cessaires pour ex√©cuter des applications sur diff√©rents ordinateurs.
* Docker tente de r√©soudre ce probl√®me en introduisant la notion de conteneurs.
* Les conteneurs Docker sont des environnements autonomes qui contiennent une application et toutes ses d√©pendances, y compris les biblioth√®ques et les param√®tres. Cela signifie que les d√©veloppeurs peuvent cr√©er un conteneur qui fonctionne parfaitement sur leur propre ordinateur, puis le partager avec d'autres sans se soucier des diff√©rences entre les environnements.
* En r√©sum√©, Docker r√©sout le "probl√®me de la matrice de l'enfer" en permettant aux d√©veloppeurs de cr√©er des conteneurs contenant leurs applications, ce qui garantit que celles-ci fonctionneront de la m√™me mani√®re partout, √©vitant ainsi les tracas li√©s aux configurations complexes.
--

== D√©j√† vu ?

L'IT n'est pas la seule industrie √† r√©soudre des probl√®mes...

image::also-a-matrix-from-hell.png[]

== Solution: Le conteneur intermodal

"Separation of Concerns"

image::blue-shipping-container.png[]

[.notes]
--
Faire le parall√®le avec les containers marchands contenant des jouets, de l'√©lectronique, de la nourriture, le tout connect√© au m√™me bateau, sans pour autant √™tre interd√©pendants.
Docker apporte une s√©paration claire des pr√©occupations gr√¢ce √† ses conteneurs. Cette s√©paration des pr√©occupations signifie que chaque composant d'une application est isol√© dans son propre conteneur. Voici comment cela fonctionne :

1. Isolation des Composants : Avec Docker, chaque composant d'une application (comme une base de donn√©es, un serveur web, etc.) est emball√© dans un conteneur distinct. Ces conteneurs fonctionnent de mani√®re ind√©pendante les uns des autres, ce qui signifie que si un composant rencontre un probl√®me ou n√©cessite une mise √† jour, cela n'affecte pas les autres composants.
2. Portabilit√© : Les conteneurs Docker encapsulent non seulement l'application, mais aussi toutes ses d√©pendances. Cela garantit que l'application fonctionnera de la m√™me mani√®re quel que soit l'endroit o√π vous l'ex√©cutez, que ce soit sur votre ordinateur local, un serveur en nuage ou ailleurs. Cela simplifie la gestion de l'application √† l'√©chelle.
3. Facilit√© de D√©ploiement : En raison de cette s√©paration, le d√©ploiement d'applications devient plus simple. Vous pouvez g√©rer chaque conteneur individuellement, les mettre √† jour sans perturber le reste de l'application, et m√™me les r√©pliquer pour mettre en place des configurations complexes.
4. Gestion des Ressources : Docker permet √©galement de g√©rer efficacement les ressources de l'ordinateur h√¥te. Chaque conteneur a sa propre allocation de ressources, ce qui emp√™che un conteneur de monopoliser toute la puissance de calcul, garantissant ainsi des performances stables pour toutes les parties de l'application.

En r√©sum√©, Docker apporte une s√©paration des pr√©occupations claire en isolant chaque composant d'une application dans son propre conteneur. Cela facilite le d√©ploiement, la gestion et la maintenance des applications, tout en garantissant la portabilit√© et la stabilit√© des performances.
--

[%auto-animate]
== Comment √ßa marche ?

"Virtualisation **L√©g√®re**"

image::container_vs_vm.jpg[]

[.notes]
--
La virtualisation l√©g√®re, dans le contexte des conteneurs Docker, est une m√©thode de virtualisation qui permet d'ex√©cuter plusieurs environnements isol√©s (conteneurs) sur un seul syst√®me d'exploitation (h√¥te). Contrairement √† la virtualisation traditionnelle, o√π chaque machine virtuelle (VM) n√©cessite son propre syst√®me d'exploitation, les conteneurs partagent le m√™me noyau du syst√®me d'exploitation de l'h√¥te.

Les principales caract√©ristiques de la virtualisation l√©g√®re sont les suivantes :

1. Isolation : Chaque conteneur est isol√© des autres, ce qui signifie qu'ils ne peuvent pas interf√©rer les uns avec les autres. Cela permet d'ex√©cuter diff√©rentes applications avec leurs propres d√©pendances sans conflits.
2. Efficacit√© des ressources : √âtant donn√© que les conteneurs partagent le m√™me noyau du syst√®me d'exploitation, ils sont beaucoup plus l√©gers en termes de ressources que les machines virtuelles. Cela permet d'ex√©cuter de nombreux conteneurs sur une seule machine physique, ce qui est efficace en termes d'utilisation des ressources.
3. D√©marrage rapide : Les conteneurs se lancent rapidement, en quelques secondes, car ils n'ont pas besoin de d√©marrer un syst√®me d'exploitation complet. Cela permet une mise √† l'√©chelle rapide des applications.
4. Portabilit√© : Les conteneurs sont portables, ce qui signifie qu'ils fonctionnent de la m√™me mani√®re sur n'importe quel syst√®me qui prend en charge Docker. Cela simplifie le d√©ploiement et la gestion des applications.

En r√©sum√©, la virtualisation l√©g√®re des conteneurs Docker permet d'ex√©cuter efficacement plusieurs environnements isol√©s sur un m√™me syst√®me d'exploitation, offrant ainsi une isolation, une efficacit√© des ressources, un d√©marrage rapide et une portabilit√© des applications.
--

[%auto-animate]
== Comment √ßa marche ?

Virtualisation

image::types_of_hypervisors.png["https://medium.com/teamresellerclub/type-1-and-type-2-hypervisors-what-makes-them-different-6a1755d6ae2c"]

[.notes]
--
Un hyperviseur est un logiciel sp√©cialis√© qui permet d'ex√©cuter plusieurs syst√®mes d'exploitation (comme Windows, Linux, etc.) sur un seul mat√©riel physique (comme un serveur). Il agit comme une couche d'abstraction entre le mat√©riel et les syst√®mes d'exploitation invit√©s.

Il existe deux types d'hyperviseurs :

Hyperviseurs de type 1 (ou bare-metal) : Ils s'installent directement sur le mat√©riel physique et n'ont pas besoin d'un syst√®me d'exploitation h√¥te. Ils sont tr√®s efficaces et sont g√©n√©ralement utilis√©s dans les centres de donn√©es pour ex√©cuter plusieurs VM de mani√®re isol√©e.

Hyperviseurs de type 2 (ou hosted) : Ils s'ex√©cutent sur un syst√®me d'exploitation existant, comme une application. Ils sont g√©n√©ralement utilis√©s pour la virtualisation de bureau ou le d√©veloppement, mais sont moins efficaces que les hyperviseurs de type 1.

En r√©sum√©, un hyperviseur vous permet d'ex√©cuter plusieurs syst√®mes d'exploitation sur un seul serveur physique, ce qui vous permet de maximiser l'utilisation des ressources mat√©rielles et de simplifier la gestion des environnements informatiques.
--

[%auto-animate]
[.columns]
== Comment √ßa marche ?

[.column]
Virtualisation

[.column]
---
image::type-1-hypervisor-examples.png["https://www.ubackup.com/enterprise-backup/type-1-hypervisor-vs-type-2.html"]
---

[.column]
---
image::type-2-hypervisor-examples.png["https://www.ubackup.com/enterprise-backup/type-1-hypervisor-vs-type-2.html"]
---

[%auto-animate]
== Comment √ßa marche ?

"Virtualisation **L√©g√®re**"

image::container_vs_vm.jpg[]

* L√©g√®re, vraiment?

[%auto-animate]
== L√©g√®re, vraiment!

image::RPiDockerConChallenge.png[background, size=contain, position=left, opacity=0.1]

[.small]
http://web.archive.org/web/20200810061020/https://www.docker.com/blog/raspberry-pi-dockercon-challenge-winner/


[%auto-animate]
== L√©g√®re, vraiment!

image::esxpi.png[background, size=contain, position=left, opacity=0.1]

[.small]
https://www.architecting.it/blog/esxi-on-raspberry-pi/

[%auto-animate]
== Conteneur != VM

image::docker-n-est-pas-VM.png[]

* Id√©e erron√©e mais cit√©e trop fr√©quemment !

[%auto-animate]
== Conteneur != VM

image::not-a-vm-9.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm-8.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm-7.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm-6.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm-5.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm-4.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm-3.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm-2.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm-1.png[]

[%auto-animate]
== Conteneur != VM

image::not-a-vm.png[]

[%auto-animate]
== Conteneur != VM

"Separation of concerns": 1 "t√¢che" par conteneur

image::vm-and-container.png[]

[.notes]
--
Les hyperviseurs et les machines virtuelles (VM) sont comme des maisons enti√®rement meubl√©es o√π chaque invit√© a sa propre maison s√©par√©e.

* Chaque maison est une VM, avec son propre syst√®me d'exploitation et ses ressources, et elles peuvent fonctionner sur le m√™me serveur physique.
* En revanche, les conteneurs sont comme des appartements dans un m√™me immeuble. Ils partagent la m√™me infrastructure, comme les escaliers et les couloirs (le noyau du syst√®me d'exploitation), mais chaque appartement (conteneur) est s√©par√© et poss√®de son propre espace priv√©. Les conteneurs partagent efficacement les ressources du serveur, car ils √©vitent de dupliquer tout le syst√®me d'exploitation, ce qui les rend plus l√©gers et plus rapides que les VM.

En r√©sum√©, les VM sont comme des maisons s√©par√©es, tandis que les conteneurs sont comme des appartements dans le m√™me b√¢timent, partageant certaines parties communes mais offrant toujours une s√©paration.
--

==  VMs & Conteneurs

Non exclusifs mutuellement

image::containers-and-vms-together.png[]

[.notes]
--
Les machines virtuelles (VM) et les conteneurs peuvent √™tre utilis√©s ensemble pour obtenir les avantages des deux mondes.

* Les VMs offrent une isolation plus forte en ex√©cutant des syst√®mes d'exploitation virtuels complets, ce qui les rend id√©ales pour des charges de travail n√©cessitant une s√©curit√© et une isolation √©lev√©es.
Les conteneurs, en revanche, sont l√©gers et rapides, ce qui les rend parfaits pour ex√©cuter de nombreuses applications sur un seul serveur.
* En combinant les deux, vous pouvez ex√©cuter des VMs pour isoler et prot√©ger des charges de travail sensibles, tout en utilisant des conteneurs pour ex√©cuter des applications l√©g√®res et faciles √† g√©rer.
Cela permet une flexibilit√© accrue dans la gestion des ressources et des charges de travail sur votre infrastructure informatique.
--

== ü§° Docker, c'est pas un peu une VM quand m√™me?

image::mobyvm.png[height=1000]

== ü§° Docker, c'est pas un peu une VM quand m√™me?

* Docker sur Windows pour ex√©cuter des conteneurs Linux :
[%step]
** Hyper-V : Sous Windows, Docker utilise souvent Hyper-V pour ex√©cuter des machines virtuelles l√©g√®res (VM) Linux.
[%step]
** Performance : Docker sur Windows pour les conteneurs Linux peut √™tre l√©g√®rement moins performant que Docker sur Linux natif.
[%step]
** Isolation : Isolation diff√©rente de celle des conteneurs Linux natifs.
[%step]
* Docker sur Linux pour ex√©cuter des conteneurs Linux :
[%step]
** Native : Docker fonctionne nativement car il partage le m√™me noyau Linux.
[%step]
** Efficacit√© : Il  est tr√®s efficace en termes de consommation de ressources.
[%step]
** Isolation : Isolation bas√©e sur les cgroups et les namespaces du noyau Linux.

[.notes]
--
* Docker sur Linux pour ex√©cuter des conteneurs Linux :
** Native : Sur un syst√®me Linux, Docker fonctionne nativement car il partage le m√™me noyau Linux. Il offre donc une performance optimale et une int√©gration transparente avec le syst√®me h√¥te.
** Efficacit√© : Comme Docker sur Linux partage le noyau du syst√®me h√¥te, il est tr√®s efficace en termes de consommation de ressources. Les conteneurs Linux sont l√©gers et se lancent rapidement.
** Isolation : Les conteneurs Linux sur Docker offrent une isolation bas√©e sur les cgroups et les namespaces du noyau Linux. Cela permet d'isoler efficacement les applications et de garantir qu'elles n'interf√®rent pas les unes avec les autres.
** Images Linux : Docker sur Linux est optimis√© pour les images de conteneurs Linux. Vous utiliserez principalement des images Linux pour vos conteneurs.

* Docker sur Windows pour ex√©cuter des conteneurs Linux :
** Hyper-V : Sur un syst√®me Windows, Docker utilise souvent Hyper-V pour ex√©cuter des machines virtuelles l√©g√®res (VM) Linux. Cela signifie que vous ex√©cutez un hyperviseur (Hyper-V) pour ex√©cuter Linux, ce qui ajoute une couche de virtualisation.
** Performance : En raison de la virtualisation, Docker sur Windows pour les conteneurs Linux peut √™tre l√©g√®rement moins performant que Docker sur Linux natif. Il existe une surcharge en raison de la virtualisation.
** Isolation : Les conteneurs Linux s'ex√©cutent dans des VM l√©g√®res, ce qui ajoute une isolation, mais elle est diff√©rente de celle des conteneurs Linux natifs. Les conteneurs Linux s'ex√©cutent toujours sur le m√™me noyau, mais ils sont isol√©s au niveau du syst√®me de fichiers.
** Images Linux : Vous utilisez √©galement des images Linux pour les conteneurs Linux ex√©cut√©s sous Docker sur Windows.

En r√©sum√©, Docker sur Linux est la meilleure option pour ex√©cuter des conteneurs Linux, car il offre une int√©gration transparente et des performances optimales. Docker sur Windows utilise Hyper-V pour ex√©cuter des conteneurs Linux, ce qui ajoute une couche de virtualisation et peut entra√Æner une l√©g√®re perte de performances. Cependant, cela fonctionne bien lorsque vous avez besoin d'ex√©cuter des conteneurs Linux sur une machine Windows.
--